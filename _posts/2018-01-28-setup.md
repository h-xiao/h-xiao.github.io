---
title: "Quantitative Trading Project"
date: 2019-09-01
#tags: [data wrangling, data science, messy data]
header:
  image: "/images/stock.jpg"
#excerpt: "Data Wrangling, Data Science, Messy Data"
mathjax: "true"
---

# Part 1: Getting Financial Data and Storing Data in MySQL


Note: this part assumes you have MySQL, Python, Anaconda installed. 

We will use the mysql.connector to connect to MySQL via Python. If you don't have this package installed, you will need to run this in command line:

```cmd
pip install mysql-connector-python
```


After that is installed, we can import in the package 

```python
import mysql.connector
```


And use this function to create our SQL database (called securities_db).

Note: we will have to set a hostname, username, and password which I've specified in a separate config. 

```python
def CreateDB:

    # Connect to the MySQL instance
    con = mysql.connector.connect(
        host = db_config['host'],
        user = db_config['user'],
        password = db_config['password'] )

    cur = con.cursor(buffered=True)
    cur.execute('CREATE DATABASE securities_db')
    con.commit()

    cur.execute('SHOW DATABASES')
    for db in cur:
        print (db)
```


After the database is set up, we will need to create tables to store the data. Since we don't know the format of the data that we will download yet, it might be good to set up these tables after.

Sample code to create a table:

```python
def CreateTB:

    # Connect to the MySQL instance
    con = mysql.connector.connect(
        host = db_config['host'],
        user = db_config['user'],
        password = db_config['password'],
        database = db_config['database'])

    cur = con.cursor(buffered=True)
    cur.execute('''CREATE TABLE tickers (id int NOT NULL AUTO_INCREMENT, 
    									ticker varchar(32) NOT NULL,
    									PRIMARY KEY (id)) ''')

    con.commit()

    cur.execute('SHOW TABLES')
    for tb in cur:
        print (tb)
```



# Part 2: Getting S&P historical daily price
Let's start off by getting historic data for tickers in S&P 500. We will first need the list of ticker symbols which we can get Wikipedia.

```python
import pandas as pd

data = pd.read_html('https://en.wikipedia.org/wiki/List_of_S%26P_500_companies')
table = data[0]
```

This can be the first table that we store in MySQL. We will need to first create the table in MySQL:

```python
con = mysql.connector.connect(
        host = db_config['host'],
        user = db_config['user'],
        password = db_config['password'])
cur = con.cursor(buffered=True)

cur.execute('''CREATE TABLE sp_ticker_data (id int NOT NULL AUTO_INCREMENT, 
                                            symbol varchar(32) NOT NULL,
                                            security varchar(255) NOT NULL,
                                            sec_filings varchar(64) NULL,
                                            gics_sector varchar(255) NULL,
                                            gics_sub_industry varchar(255) NULL,
                                            headquarters_location varchar(255) NULL,
                                            date_first_added datetime NULL, 
                                            cik int NULL,
                                            founded int NULL,
                                            PRIMARY KEY (id))''')
```


Then we can store it:

```python
from sqlalchemy import create_engine

engine = create_engine('mysql://' + db_config['user'] + ':' + db_config['password'] + '@' + db_config['host'] + '/' + db_config['database'])
con = engine.connect()
table.to_sql(name='sp_ticker_data', con=con, if_exists='replace')
con.close()
```



We will use the new Yahoo Finance package to get historic data for 





## Setting up MySQL connection in Python


















# H1 Heading

## H2 Heading

### H3 Heading

Here's some basic text.

And here's some *italics*

Here's some **bold** text.

What about a [link](https://github.com/dataoptimal)?

Here's a bulleted list:
* First item
+ Second item
- Third item

Here's a numbered list:
1. First
2. Second
3. Third

Python code block:
```python
    import numpy as np

    def test_function(x, y):
      z = np.sum(x,y)
      return z
```

R code block:
```r
library(tidyverse)
df <- read_csv("some_file.csv")
head(df)
```

Here's some inline code `x+y`.

Here's an image:
<img src="{{ site.url }}{{ site.baseurl }}/images/perceptron/linsep.jpg" alt="linearly separable data">

Here's another image using Kramdown:
![alt]({{ site.url }}{{ site.baseurl }}/images/perceptron/linsep.jpg)

Here's some math:

$$z=x+y$$

You can also put it inline $$z=x+y$$
